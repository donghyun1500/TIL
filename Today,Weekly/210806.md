# ë¯¸ë˜ì˜ ê°€ì¥ ì¢‹ì€ ì ì€ í•œ ë²ˆì— í•˜ë£¨ì”© ì˜¨ë‹¤ëŠ” ê²ƒì´ë‹¤.â²

The best thing about the future is that it comes one day at a time.

## - ì—ì´ë¸ŒëŸ¬í–„ ë§ì»¨ -


í•˜..socket ê³µë¶€ë¥¼ ê³„ì† í•˜ê³  ìˆì§€ë§Œ ìƒê°ë§Œí¼ ìœ íˆ½ ê°•ì˜ë‚˜ ì´ëŸ°ê²Œ ì´í•´ê°€ ì˜ ë˜ì§ˆ ì•ŠëŠ”ë‹¤..

ìš”ë²ˆì£¼ ë¨¸ë¦¬ê°€ ì¢€ êµ³ì€ ëŠë‚Œì´ë„ê¹Œ.. ëª©í‘œëŠ” ì´ë²ˆì£¼ê¹Œì§€ socket ê¸°ëŠ¥ì„ ì´ìš©í•´ ì±„íŒ…ì„ êµ¬í˜„í•˜ëŠ”ê±´ë°..ğŸ˜­

ë‚´ì¼ë„ ì—´ì‹¬íˆ í•´ë´ì•¼ê² ë‹¤..ì–´ë µë‹¤ ì–´ë ¤ì›Œ..ã… ã…  node.js êµê³¼ì„œë„ ì¢€ ì°¸ì¡°ë¥¼ ë§ì´ í•´ë´ì•¼ê² ë‹¤..

### ì›¹ ì†Œì¼“ì´ë€?

HTML5ì— ìƒˆë¡œ ì¶”ê°€ëœ ìŠ¤íŒ©ìœ¼ë¡œ âœ…ì‹¤ì‹œê°„ ì–‘ë°©í–¥ ë°ì´í„° ì „ì†¡ì„ ìœ„í•œ ê¸°ìˆ ì´ë©°âœ…, HTTPì™€ ë‹¤ë¥´ê²Œ WSë¼ëŠ” í”„ë¡œí† ì½œì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

ìµœì‹  ë¸Œë¼ìš°ì €ëŠ” ì›¹ ì†Œì¼“ì„ ì§€ì›í•˜ê³ , ë…¸ë“œì—ì„œëŠ” wsë‚˜ Socket.IOê°™ì€ íŒ¨í‚¤ì§€ë¥¼ í†µí•´ ì›¹ ì†Œì¼“ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì›¹ ë¸Œë¼ìš°ì €ì™€ ì›¹ ì„œë²„ê°€ ì§€ì†ì ìœ¼ë¡œ ì—°ê²°ëœ ë¼ì¸ì„ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆëŠ” ê²ƒì´ ì›¹ ì†Œì¼“ì´ë‹¤!

* ì¶”ê°€ë¡œ ì„œë²„ì„¼íŠ¸ ì´ë²¤íŠ¸(Server Sent Events)(ì´í•˜ SSE)ë¼ëŠ” ê¸°ìˆ ë„ ìˆë‹¤.

EventSourceë¼ëŠ” ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì›¹ ì†Œì¼“ê³¼ ë‹¤ë¥¸ì ì€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œëŠ” ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ì—†ëŠ” ë‹¨ë°©í–¥ í†µì‹ ì…ë‹ˆë‹¤.

ex) ì£¼ì‹ ì°¨íŠ¸ ì—…ë°ì´íŠ¸, SBSì—ì„œ ìƒˆë¡œìš´ ê²Œì‹œë¬¼ ê°€ì ¸ì˜¤ê¸°ë“±ë“±

Socket.IOëŠ” ì›¹ ì†Œì¼“ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. Socket.IOëŠ” ì›¹ ì†Œì¼“ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ëŠ”

ì•Œì•„ì„œ ì›¹ ì†Œì¼“ ëŒ€ì‹  í´ë§ ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì‹¤ì‹œê°„ ë°ì´í„° ì „ì†¡ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

ê°„ë‹¨í•˜ê²Œ Reactì™€ Node.JSë¡œ ì‹¤ì‹œê°„ ì±„íŒ…ì´ ê°€ëŠ¥í•œ ì•±ì„ êµ¬í˜„í•œ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤.

Serverë¶€ë¶„

     const app = require('express')()
     const server = require('http').createServer(app)
     const io = require('socket.io')(server,{
         cors:{
             origin:'*',
         }
     })

     io.on('connection', socket => {
         console.log('connection made successfully')
         socket.on('message',payload => {
             console.log('Message received on server:', payload)
             io.emit('message',payload)
         })
     })

     server.listen(3000, ()=> {
         console.log('I am listening at port: 3000)');
     })

Frontë¶€ë¶„

     import React, {useState, useEffect} from 'react';
     import io from 'socket.io-client'

     const socket = io('http://localhost:3000')
     const userName = 'User '+parseInt(Math.random()*10)

     function App() {
       const [message, setMessage] = useState('')
       const [chat, setChat] = useState([])

       useEffect(() => {
         socket.on('message', payload => {
           setChat([...chat, payload])
         })
       })

       const sendMessage = (e) => {
         e.preventDefault();
         console.log(message)
         socket.emit('message',{userName,message})
         // Send message on socket
         setMessage('')
       };
       return (
         <div className="App">
           <h1>Welcome to chat app</h1>
           <form onSubmit={sendMessage}>
             <input type="text" name="message"
             placeholder='Type message'
             value={message}
             onChange={(e) => {setMessage(e.target.value)}}
             required
             ></input>
             <button type='submit'>Send</button>
           </form>
           {chat.map((payload, index) => {
             return(
               <h3 key={index}>{payload.userName}: <span>{payload.message}</span></h3>
             )
           })}
         </div>
       );
     }

     export default App;
