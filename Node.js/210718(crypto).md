# Crypto란❓

다양한 방식의 암호화를 도와주는 모듈입니다.

몇가지 메소드를 익혀두자!

비밀번호는 보통 단방향 암호화 알고리즘을 사용해서 암호화 한다. 복호화할수 없는 암호화 방식을 뜻한다.

한번 암호화하면 원래 문자열을 찾을 수 없다. 대신 해시 함수라고 부르기도 한다.

단방향 암호화 알고리즘은 주로 해시 기법을 사용한다.

- 해시 기법이란❓

어떠한 문자열을 고정된 길이의 다른 문자열로 바꿔버리는 방식!

현재는 주로 pbkdf2나 bcrypt, scrypt라는 알고리즘으로 비밀번호를 암호화하고 있다.

- createHash(알고리즘): 사용할 해시 알고리즘을 넣습니다. sha256,sha512등등 
- update(문자열): 변환할문자열을 넣습니다.
- digest(인코딩): 인코딩할 알고리즘을 넣습니다. base64,hex,latin1이 주로 사용되는데 그중 base64가 결과 문자열이 가장 짧아 애용된다.

- pbkdf2란❓

기존 문자열에 salt라고 불리는 문자열을 붙인 후 해시 알고리즘을 반복해서 적용하는 것.

randomBytes() 메서드로 64바이트 길이의 문자열을 만드는데 이것이 salt이다.

pbkdf2() 메서드에는 순서대로 비밀번호,salt,반복 횟수, 출력 바이트, 해시 알고리즘을 인수로 넣는다. (ex: crypto.pbkdf2('비밀번호', salt, 100000, 64, 'sha512', (err,key) => {}

pbkdf2는 간단하지만 bcrypt나 scrypt보다 보안적으로 취약하다.

- 양방향 대칭형 암호화❓

암호화된 문자열을 복호화할수 있으며, 키(열쇠)라는 것이 사용된다.

암호를 복호화하려면 암호화할 떄 사용한 키와 같은 키를 사용해야 한다.

- crypto.createCipheriv(알고리즘, 키, iv)
- cipher.update(문자열, 인코딩, 출력 인코딩)
- cipher.final(출력 인코딩)
- crypto.createDecipheriv(알고리즘, 키, iv)
- decipher.update(문자열, 인코딩, 출력 인코딩)
- decipher.final(출력 인코딩)

이 부분은 일단 이런게 있다는것만 알고 추후에 고수가 되면 다시 한번 공부해보자..


